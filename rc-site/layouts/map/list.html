{{ define "main" }}

<style>

    body, html {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
    }
    img.huechange { filter: hue-rotate(240deg); }

    #blur-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5); /* Adjust the alpha value for the desired opacity */
        backdrop-filter: blur(8px); /* Adjust the blur radius as needed */
        display: none;
        z-index: 1090;
    }

    #container::-webkit-scrollbar {
        width: 12px;
        background-color: #E7E9DF;
        border-radius: 6px;

    }


    #container::-webkit-scrollbar-thumb {
        background-color: #9EB0A2;
        border-radius: 6px;
    }

</style>
         <!-- Header & Hero -->
         <div class="h-screen overflow-hidden w-full">
            <!-- Hero -->
            <div class="relative flex justify-center gap-4 flex-col items-center mx-auto h-full w-full bg-cover bg-local" style="background-image:url('/notassets/map\ cover\ darker.png');">
                <!-- Header -->
                {{ partial "header.html" . }}
                <h1 class="font-['Playfair Display'] font-serif text-white text-5xl text-center leading-tight">
                  Resilient Communities <br> Around The World
                </h1>
                <span class="text-white line-clamp-4 text-center">
                    Our mission is to positively influence a multitude of communities,<br>ranging from renowned landmarks to undiscovered villages,<br>making a meaningful impact wherever we go.
                </span>
                <div class="flex gap-4">
                  <button class="text-white flex items-center justify-between gap-1 bg-[#0E773F] px-6 py-2 rounded-full font-bold min-w-[150px] hover:"><span>See Map</span><span class="material-symbols-outlined">
                    arrow_right_alt
                    </span>
                  </button>
                  <button class="text-white flex items-center justify-between gap-1 border-[#0E773F] border-2 px-6 py-2 rounded-full font-bold min-w-[150px]"><span>Join Now</span><span class="material-symbols-outlined">
                    arrow_right_alt
                    </span>
                  </button>
                </div>


            </div>
          </div>
        <div class="w-full h-screen overflow-hidden relative" id="map-content">

            <div id="blur-overlay"></div>

            <h2 class="text-[#0E773F] text-base font-semibold text-center mb-2 mt-4">
                Latest Projects & Campaigns
                </h2>
                <h2 class="text-gray-800 text-2xl font-semibold text-center font-['Playfair Display'] font-serif mb-4">
                Our Latest RC Projects
                </h2>
                <p class="px-7 font-sans text-sm antialiased font-light leading-relaxed text-gray-700 text-left">
                Explore the impact of our NGO with 'Our Latest RC Projects.' Showcasing a commitment to positive change, we invite you to delve into our innovative and community-driven initiatives. From community projects and program campaigns to infrastructure project campaigns and engineering prototyping campaigns, our diverse efforts aim to create lasting change. Witness the transformative power of compassion and join us in shaping a better tomorrow through our ongoing RC projects. Together, let's amplify the reach of resilience and change lives for the better.
                </p>

            <div class="flex h-[66%] px-7 py-7">
                <div id="map"  style="height: 500px;" class="w-full h-full rounded-lg" ></div>
            </div>



        </div>

        <script>

          var map = L.map('map').setView([31.7917, -7.0926], 6);
         L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
             maxZoom: 19,
             attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
         }).addTo(map);
      
         fetch('/json/map.json')
      .then(response => response.json())
      .then(data => {
      data.forEach(function(markerData) {
        var marker = L.marker([markerData.latitude, markerData.longitude], { color: markerData.color }).addTo(map);
        marker._icon.classList.add("huechange");
        marker.on('click', function() {
          openPopup(markerData);
        });
      
      });
      })
      .catch(error => console.error('Error loading marker data:', error));
      
      
      
         // Content for the popup
      
         var blurOverlay = document.getElementById('blur-overlay');
         var mapcontent = document.getElementById('map-content');
      
         // Function to open a full-width popup when the marker is clicked
         function openPopup(markerData) {
             blurOverlay.style.display = 'block';
             var popup = document.createElement('div');
             popup.innerHTML = `
          <div class="w-full p-7 relative">
            <div class="pointer absolute top-0 right-0" id="close-popup-btn">
                <span class="material-symbols-outlined cursor-pointer">
                  close
                  </span>
            </div>
            <!-- Title & sub -->
            <div class="mb-4 w-full lg:w-1/2">
                <h2 class="text-gray-800 text-xl font-semibold font-['Playfair Display'] font-serif leading-tight">
                    ${markerData.title}
                </h2>
                <span class="font-sans text-base antialiased font-normal leading-relaxed text-gray-700 text-left">
                    ${markerData.subtitle}
                </span>
            </div>

            <!-- images & details -->
            <div class="w-full min-h-fit flex flex-col lg:flex-row justify-between">
                <div class="flex flex-col lg:flex-row h-[20rem] gap-4 mb-4 w-full lg:w-1/2">
                    <div class="flex flex-row lg:flex-col justify-between w-full lg:w-[10%]">
                        <img class="w-16 h-16 object-cover rounded-lg" src="${markerData.images[0]}" alt="">
                        <img class="w-16 h-16 object-cover rounded-lg" src="${markerData.images[0]}" alt="">
                        <img class="w-16 h-16 object-cover rounded-lg" src="${markerData.images[0]}" alt="">
                    </div>
                    <div class="w-full lg:w-[90%]">
                        <img class="w-full h-1/2 object-cover rounded-lg lg:h-full" src="${markerData.mainImage}" alt="">
                    </div>
                </div>
                <div class="bg-gray-200 w-full lg:w-1/3 mb-4 rounded-lg p-7">
                    <h2 class="text-gray-800 text-xl font-semibold font-['Playfair Display'] font-serif mb-4 border-b border-gray-400">
                        Project Details
                    </h2>
                    <div class="flex flex-col gap-2">
                        <div class="flex items-center">
                            <span class="material-symbols-outlined text-[#0E773F] mr-1">paid</span>
                            <span class="font-semibold text-gray-800 text-sm mr-1">Budget :</span>
                            <span class="font-semibold text-gray-800 text-sm">${markerData.budget}</span>
                        </div>
                        <div class="flex items-center">
                            <span class="material-symbols-outlined text-[#0E773F] mr-1">paid</span>
                            <span class="font-semibold text-gray-800 text-sm mr-1">Raised :</span>
                            <span class="font-semibold text-gray-800 text-sm">${markerData.raised}</span>
                        </div>
                        <div class="flex items-center">
                            <span class="material-symbols-outlined text-[#0E773F] mr-1">person</span>
                            <span class="font-semibold text-gray-800 text-sm mr-1">Donors :</span>
                            <span class="font-semibold text-gray-800 text-sm">${markerData.donors}</span>
                        </div>
                        <div class="flex items-center">
                            <span class="material-symbols-outlined text-[#0E773F] mr-1">location_on</span>
                            <span class="font-semibold text-gray-800 text-sm mr-1">Location :</span>
                            <span class="font-semibold text-gray-800 text-sm">${markerData.location}</span>
                        </div>
                    </div>
                    <br>
                    <button class="text-white text-center bg-[#0E773F] px-4 py-2 rounded-full font-semibold w-full">
                        DONATE
                    </button>
                </div>
            </div>

            <!-- Description -->
            <h2 class="text-gray-800 text-xl font-semibold font-['Playfair Display'] font-serif leading-tight mb-4">
                Description
            </h2>
            <div class="flex flex-col lg:flex-row justify-between w-full">
                <div class="w-full lg:w-1/2">
                    <p class="font-sans text-base antialiased font-normal text-gray-700 text-justify">
                    ${markerData.description}
                    </p>
                    <br>
                    <p class="font-sans text-base antialiased font-normal text-gray-700 text-justify">
                        Guest it he tears aware as. Make my no cold of need. He been past in by my hard. Warmly thrown oh he common future. Otherwise concealed favourite frankness on be at dashwoods defective at. Sympathize interested simplicity at do projecting increasing terminated. As edward settle limits at in.
                    </p>
                    <br>
                    <div class="flex gap-4">
                        <div class="bg-[#0E773F] rounded-lg text-white px-3 py-2 font-semibold w-fit text-sm text-center hover:bg-[#0e773fc0]"><span>${markerData.tags[0]}</span></div>
                        <div class="bg-[#0E773F] rounded-lg text-white px-3 py-2 font-semibold w-fit text-sm text-center hover:bg-[#0e773fc0]"><span>${markerData.tags[1]}</span></div>
                    </div>
                </div>
                <div class="flex flex-col w-full lg:w-1/3 mt-4 lg:mt-0">
                    <div class="bg-gray-200 w-full mb-4 rounded-lg p-7 h-[20rem]">
                        <h2 class="text-gray-800 text-xl font-semibold font-['Playfair Display'] font-serif mb-4 border-b border-gray-400">
                            Documents
                        </h2>
                        <span class="text-sm text-gray-700">For further information about this project, check the following documents</span>
                        <button class="text-center bg-white px-4 py-2 rounded-full font-semibold w-full mt-4">
                            <div class="w-full flex gap-4">
                                <img class="w-6 h-6" src="/notassets/icons/pdf (1).png" alt="">
                                <span>${markerData.documents[0].title}</span>
                            </div>
                        </button>
                        <button class="text-center bg-white px-4 py-2 rounded-full font-semibold w-full mt-4">
                            <div class="w-full flex gap-4">
                                <img class="w-6 h-6" src="/notassets/icons/docx.png" alt="">
                                <span>${markerData.documents[1].title}</span>
                            </div>
                        </button>
                    </div>
                    <div class="bg-gray-200 w-full mb-4 rounded-lg p-7 h-[20rem]">
                        <h2 class="text-gray-800 text-xl font-semibold font-['Playfair Display'] font-serif mb-4 border-b border-gray-400">
                            Partners
                        </h2>
                        <span class="text-sm text-gray-700">Our Partners regarding this project</span>
                        <div class="flex w-full gap-4 mt-4">
                            <img class="object-cover h-16 w-16" src="${markerData.partners[0]}" alt="">
                            <img class="object-cover h-16 w-16" src="${markerData.partners[1]}" alt="">
                        </div>
                    </div>
                </div>
            </div>
        </div>
         `;
             popup.style.position = 'fixed';
             popup.style.top = '50%';
             popup.style.left = '50%';
             popup.style.transform = 'translate(-50%, -50%)';
             popup.style.width = '80%';
             popup.style.height = '80%';
             popup.style.overflowY = 'auto';
             popup.style.background = '#fff';
             popup.style.borderRadius = '8px';
             popup.style.padding = '20px';
             popup.style.zIndex = '1111'
             popup.style.boxShadow = '0 0 10px rgba(0, 0, 0, 0.3)';
             mapcontent.appendChild(popup);
             document.getElementById('close-popup-btn').addEventListener('click', function() {
                popup.remove()
                blurOverlay.style.display = 'none';
                ;});
      
         }
      
        </script>

{{ end }}
